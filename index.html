<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>恋みくじ | ネオンきらギャル（背景固定・GitHub Pages用）</title>
<meta name="description" content="ローズ×ゴールドにネオン♡/星の静止背景。ギャル語で背中押し。ラッキーアイテムは“かわいい多め”。">
<meta name="robots" content="index,follow">
<style>
  :root{
    --bg:#fff3f7; --ink:#2a2224; --sub:#5e4a52;
    --line:#efc6d3; --ring:#f7b8c9;
    --accent:#ff5a93; --accent-deep:#e11e63;
    --gold1:#f8e7b2; --gold2:#f1cd68; --gold3:#da9f3b;
  }
  *{box-sizing:border-box} html,body{margin:0}
  body{
    font-family: ui-rounded, "Hiragino Kaku Gothic ProN","Yu Gothic","Noto Sans JP",system-ui,sans-serif;
    color:var(--ink);
    background:
      radial-gradient(1200px 600px at 10% -10%, rgba(255,180,210,.35), transparent 60%),
      radial-gradient(1000px 500px at 110% 10%, rgba(255,170,195,.25), transparent 60%),
      #fff3f7;
    overflow-x:hidden;
    -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
  }
  .neon-layer{position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden}
  .neon{position:absolute; font-size:24px; opacity:.9;}
  .neon.star{color:#000; text-shadow:0 0 8px rgba(255,213,74,.85),0 0 16px rgba(255,213,74,.55),0 0 28px rgba(255,213,74,.35); filter:none; opacity:.9}
  .neon.heart{color:#000; text-shadow:0 0 8px rgba(255,42,161,.9),0 0 18px rgba(255,42,161,.6),0 0 30px rgba(255,42,161,.4); filter:none; opacity:.95}

  header{text-align:center;padding:26px 14px 12px}
  .logo{display:inline-flex;align-items:center;gap:10px;border:2px solid var(--ring);padding:10px 18px;border-radius:16px;background:#fff;box-shadow:0 10px 24px rgba(225,30,99,.18)}
  .logo h1{margin:0;font-size:22px;letter-spacing:.18em}
  main{max-width:900px;margin:12px auto 28px;padding:0 16px}
  .panel{background:#fff;border:2px solid var(--ring);border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,.06)}
  .lead{text-align:center;font-weight:900;margin:6px 0 14px;letter-spacing:.05em;color:#402b31}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  label{font-size:12px;color:var(--sub);margin-bottom:6px;display:block}
  input[type="text"]{width:100%;padding:12px 14px;border:2px solid var(--line);border-radius:12px;background:#fff;font-size:16px;color:var(--ink)}
  .chips{display:flex;flex-wrap:wrap;gap:8px}
  .chip{border:2px solid var(--line);border-radius:999px;padding:8px 12px;cursor:pointer;background:#fff;transition:.2s;font-weight:700}
  .chip.active{border-color:var(--accent);color:var(--accent);background:#ffe6f0}
  .cta{display:block;width:100%;max-width:540px;margin:16px auto;padding:14px 18px;border:none;border-radius:999px;color:#fff;
       background:linear-gradient(180deg,var(--accent),var(--accent-deep));
       box-shadow:0 8px 0 #b3154b, 0 20px 40px rgba(225,30,99,.25);
       cursor:pointer;font-weight:900;letter-spacing:.08em;font-size:18px;transition:transform .05s}
  .cta:active{transform:translateY(2px);box-shadow:0 6px 0 #b3154b, 0 16px 28px rgba(225,30,99,.25)}
  .note{text-align:center;color:var(--sub);font-size:12px}

  .omikuji-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;justify-items:center;margin:8px 0 10px}
  .card{
    width:116px;height:232px;border-radius:16px;position:relative;cursor:pointer;opacity:0;transform:translateY(26px) scale(.98);
    background:linear-gradient(145deg,var(--gold1),var(--gold2)); border:2px solid #e7c26a;
    box-shadow:inset 0 1px 0 rgba(255,255,255,.65), inset 0 -12px 20px rgba(218,159,59,.38), 0 16px 26px rgba(218,159,59,.28);
    overflow:hidden; transition:transform .15s ease;
  }
  .card:hover{transform:translateY(0) scale(1.03)}
  .card::before{content:""; position:absolute; inset:-40% -40% auto auto; width:160%; height:160%;
    background:linear-gradient(60deg, rgba(255,255,255,.0) 30%, rgba(255,255,255,.4) 45%, rgba(255,255,255,.0) 60%);
    transform:rotate(8deg); filter:blur(1px); mix-blend-mode:screen; opacity:.0; transition:opacity .25s;}
  .card:hover::before{opacity:.8}
  .card::after{content:"恋みくじ"; position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    color:#7a4e00; font-weight:900; letter-spacing:.32em; writing-mode:vertical-rl; text-shadow:0 1px 0 rgba(255,255,255,.5);}
  .card.revealed{animation:reveal .45s ease forwards}
  @keyframes reveal{to{opacity:1; transform:translateY(0) scale(1)}}

  .sticker{position:absolute; font-size:22px; filter:drop-shadow(0 2px 3px rgba(0,0,0,.12)); animation:pop .9s ease both;}
  @keyframes pop{0%{transform:scale(.7) rotate(-8deg); opacity:0} 100%{transform:scale(1) rotate(0); opacity:1}}
  .glow-pink{ text-shadow: 0 0 8px rgba(255,90,147,.85), 0 0 16px rgba(255,90,147,.45); }
  .glow-gold{ text-shadow: 0 0 8px rgba(245,208,86,.85), 0 0 16px rgba(245,208,86,.45); }
  .glow-blue{ text-shadow: 0 0 8px rgba(100,160,255,.85), 0 0 16px rgba(100,160,255,.45); }
  .sparkle{position:absolute; inset:auto auto 8px 8px; width:28px; height:28px; pointer-events:none}
  .sparkle:before, .sparkle:after{content:""; position:absolute; inset:0; border-radius:50%;
    background:radial-gradient(circle, rgba(255,255,255,.95), rgba(255,255,255,.0) 60%);
    animation:blink 1.6s infinite ease-in-out;}
  .sparkle:after{ animation-delay:.8s }
  @keyframes blink{ 0,100%{opacity:.15; transform:scale(.6)} 50%{opacity:1; transform:scale(1)} }

  .helper{text-align:center;color:var(--sub);margin-top:4px}
  .result{display:none;margin-top:12px;border:2px solid var(--ring);border-radius:16px;background:#fff;padding:16px}
  .badge{display:inline-block;margin-bottom:8px;padding:.4em 1em;border-radius:999px;border:2px solid var(--line);font-size:13px;font-weight:800;color:var(--accent)}
  .title{font-size:20px;font-weight:900;margin-bottom:6px}
  .text{line-height:1.9;font-size:16px}
  .meta{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
  .meta div{background:#fff6f9;border:2px dashed var(--line);border-radius:10px;padding:10px;font-weight:700}
  .share{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .ghost{border:2px solid var(--line);background:#fff;border-radius:10px;padding:10px 12px;cursor:pointer}
  .adbox{margin-top:14px;padding:10px;border:2px dashed #efc6d3;border-radius:12px;background:#fff;min-height:120px;display:flex;align-items:center;justify-content:center}
</style>
</head>
<body>
<div class="neon-layer" id="neon"></div>
<header><div class="logo"><span>⛩</span><h1>恋みくじ</h1></div></header>
<main>
  <section class="panel" id="step1">
    <p class="lead">まずは入力してね</p>
    <div class="row">
      <div>
        <label>お名前（任意）</label>
        <input id="name" type="text" maxlength="20">
      </div>
      <div>
        <label>現在の恋愛状況</label>
        <div class="chips" id="statusChips"></div>
      </div>
    </div>
    <button class="cta" id="toStep2">おみくじを用意する</button>
    <p class="note">※ 日本時間で1日1回だけ引けます</p>
  </section>

  <section class="panel" id="step2" style="display:none">
    <p class="lead">おみくじを選んでください</p>
    <div class="omikuji-grid" id="omikujiGrid"></div>
    <p class="helper">金のおみくじが順番に出てくるよ。直感で1枚えらんでね♡</p>
  </section>

  <section class="panel" id="step3" style="display:none">
    <div class="result" id="resultBox">
      <span class="badge" id="luckBadge">大吉</span>
      <div class="title"><span id="who">あなた</span>の今日の恋愛運</div>
      <div class="text" id="fortuneText">…</div>
      <div class="meta">
        <div>ラッキーカラー：<b id="luckyColor">さくらいろ</b></div>
        <div>ラッキーアイテム：<b id="luckyItem">小さなお守り</b></div>
      </div>
      <div class="share">
        <button class="ghost" id="shareX">Xでシェア</button>
        <button class="ghost" id="backTomorrow">明日また引く</button>
      </div>
      <div class="adbox" id="ad-slot">
        <!-- ▼▼▼ AdSense（クライアントID/スロットを差し替え） ▼▼▼
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
     data-ad-slot="YYYYYYYYYY"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
        ▲▲▲ ここまで貼り付け ▲▲▲ -->
        <small style="color:#8a6771;font-weight:700">※ 広告枠（AdSenseコードをここへ）</small>
      </div>
    </div>
  </section>
</main>

<script>
/* ===== Fixed neon background spawn ===== */
(function neonBG(){
  const layer=document.getElementById('neon');
  const W=window.innerWidth, H=window.innerHeight;
  const COUNT = Math.min(28, Math.floor((W*H)/22000));
  const icons = ['❤','💖','💗','💘','⭐','✨','✦','✧'];
  for(let i=0;i<COUNT;i++){
    const e=document.createElement('div');
    const ico=icons[Math.floor(Math.random()*icons.length)];
    e.textContent=ico;
    e.className='neon '+(ico==='⭐'||ico==='✦'||ico==='✧'?'star':'heart');
    e.style.left=(Math.random()*100)+'%';
    e.style.top=(Math.random()*100)+'%';
    e.style.fontSize=(18+Math.random()*28)+'px';
    layer.appendChild(e);
  }
})();

/* ===== Data ===== */
const STATUSES=['片思い','両想い','恋人あり','恋人探し中','失恋した','わからない','その他'];
const LUCK=[{name:'大吉',weight:15},{name:'中吉',weight:25},{name:'小吉',weight:25},{name:'吉',weight:20},{name:'凶',weight:10},{name:'大凶',weight:5}];
const COLOR=['さくらいろ','うす紅','若草','空','藤','生成り','深紺','珊瑚','桃','翡翠'];

/* Lucky Items: cute-heavy (80%) vs funny (20%) */
const CUTE_ITEMS=['ピンクのリップ','ハート型ミラー','ふわふわキーホルダー','桜モチーフのアクセ','キラキラヘアピン','パステルのスマホケース','ちいかわステッカー','香りのいいキャンドル','もふもふ靴下','ハートサングラス','小さめシュシュ','ビーズリング','ラメ入りハンドクリーム','リボンのハアゴム','パールのイヤーカフ'];
const FUN_ITEMS=['チュッパチャプス（推し味）','くまマシュマロ','ギャル語辞典（ネタ）','勝負用100円玉','推しのアクスタ','カエルのストラップ','コンビニおにぎり（塩）','うまい棒（チーズ）','ひよこのぬい','銭湯のロッカーキー'];
function pickLuckyItem(){return Math.random()<0.8 ? CUTE_ITEMS[Math.floor(Math.random()*CUTE_ITEMS.length)] : FUN_ITEMS[Math.floor(Math.random()*FUN_ITEMS.length)];}

/* ギャル風メッセージ素材 */
const GAL_OPEN=['やっほ〜','ねえねえ','マジでさ','本音いうけど','ちょい聞いて'];
const GAL_TAIL=['だから自信もっていこ♡','今日は可愛さ盛ってこ！','焦らんでOKね？','深呼吸して、はい優勝〜','絶対いけるって！'];
const GAL_BY_STATUS={'片思い':'想いはちゃんと伝わってる感じする。','両想い':'空気あったかいし、進めてこ。','恋人あり':'安定感つよ、たまにサプライズ足しとこ。','恋人探し中':'出会い運きてる、視野広めでどうぞ。','失恋した':'今はケア優先、ムリしないのが勝ち。','わからない':'決めつけ禁止、観察モード最強。','その他':'マイペースが一番盛れる。'};
const GAL_BY_LUCK={'大吉':['今日バチバチにツイてる！','直感信じて動こ〜！'],'中吉':['いい波きてる〜','無理なく一歩前ね。'],'小吉':['ぼちぼち良き◎','小さい優しさが効くよ。'],'吉':['じわ伸び〜','丁寧にいけば勝ち。'],'凶':['いまは待ちターン','ムリゲー回避でOK。'],'大凶':['今日は守り強め！','自分アゲ優先ね。']};

const TZ='Asia/Tokyo';
const todayKey=()=>new Intl.DateTimeFormat('ja-JP',{timeZone:TZ,year:'numeric',month:'2-digit',day:'2-digit'}).format(new Date());
const get=(k,d=null)=>{try{return JSON.parse(localStorage.getItem(k))??d}catch{return d}};
const set=(k,v)=>localStorage.setItem(k,JSON.stringify(v));
const pick=a=>a[Math.floor(Math.random()*a.length)];
function weightedPick(list){const tot=list.reduce((s,x)=>s+x.weight,0);let r=Math.random()*tot;for(const x of list){if((r-=x.weight)<0)return x;}return list[0];}

const step1=document.getElementById('step1'), step2=document.getElementById('step2'), step3=document.getElementById('step3');
const chipsWrap=document.getElementById('statusChips'); const grid=document.getElementById('omikujiGrid');
const nameEl=document.getElementById('name'); const luckBadge=document.getElementById('luckBadge'); const whoEl=document.getElementById('who');
const fortuneEl=document.getElementById('fortuneText'); const colorEl=document.getElementById('luckyColor'); const itemEl=document.getElementById('luckyItem');
const shareX=document.getElementById('shareX');

let currentStatus=STATUSES[0];
STATUSES.forEach(s=>{const b=document.createElement('button'); b.type='button'; b.className='chip'; b.textContent=s; b.onclick=()=>{ currentStatus=s; [...chipsWrap.children].forEach(x=>x.classList.remove('active')); b.classList.add('active'); }; chipsWrap.appendChild(b);});
chipsWrap.firstChild.classList.add('active');

document.getElementById('toStep2').onclick=()=>{
  if(get('love-ghpages-static-'+todayKey())){ alert('今日は引き済み（日本時間）です'); return; }
  step1.style.display='none'; step2.style.display='block'; showCardsSequentially();
};

function rb(min,max){ return Math.random()*(max-min)+min; }
function showCardsSequentially(){
  grid.innerHTML=''; const N=5;
  for(let i=0;i<N;i++){
    const c=document.createElement('div'); c.className='card'; c.style.animationDelay=(i*0.2)+'s';
    const stickerPool=['💖','💗','💘','💕','💅','💍','🎀','✨','⭐','🌟','🪩','🌙']; const glows=['glow-pink','glow-gold','glow-blue'];
    const count=8+Math.floor(Math.random()*5);
    for(let k=0;k<count;k++){ const s=document.createElement('div'); s.className='sticker '+glows[Math.floor(Math.random()*glows.length)];
      s.textContent=stickerPool[Math.floor(Math.random()*stickerPool.length)]; s.style.left=rb(4,80)+'%'; s.style.top=rb(4,80)+'%';
      s.style.transform='rotate('+rb(-20,20)+'deg)'; s.style.fontSize=(16+Math.random()*20)+'px'; s.style.animationDelay=(Math.random()*0.6)+'s'; c.appendChild(s); }
    for(let k=0;k<2;k++){ const sp=document.createElement('div'); sp.className='sparkle'; sp.style.left=rb(6,78)+'%'; sp.style.top=rb(6,78)+'%'; c.appendChild(sp); }
    grid.appendChild(c); setTimeout(()=>c.classList.add('revealed'), 20); c.onclick=()=>onPickCard(i);
  }
}

function buildGyaruMessage(name, status, luck){
  const who = name ? `「${name}」` : 'あんた'; const open = pick(GAL_OPEN);
  const luckLines = GAL_BY_LUCK[luck] || ['今日はゆるっといこ。','無理しないで◎']; const statusLine = GAL_BY_STATUS[status] || ''; const tail = pick(GAL_TAIL);
  return `${open}、${who}さ〜 ${luckLines[0]} ${statusLine} ${luckLines[1]} ${tail}`;
}

function onPickCard(idx){
  const luck = weightedPick(LUCK).name;
  const res = { name: nameEl.value.trim(), status: currentStatus, luck, message: buildGyaruMessage(nameEl.value.trim(), currentStatus, luck), color: pick(COLOR), item: pickLuckyItem(), at: Date.now() };
  set('love-ghpages-static-'+todayKey(), res); render(res); step2.style.display='none'; step3.style.display='block';
}

function render(res){ luckBadge.textContent=res.luck; whoEl.textContent=(res.name||'あなた'); fortuneEl.textContent=res.message; colorEl.textContent=res.color; itemEl.textContent=res.item; document.getElementById('resultBox').style.display='block'; }

shareX.onclick=()=>{ const res=get('love-ghpages-static-'+todayKey()); if(!res) return; const text=`【恋みくじ：${res.luck}】${res.message} #恋みくじ`; const url=location.href; window.open(`https://x.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`,'_blank'); };
document.getElementById('backTomorrow')?.addEventListener('click',()=>alert('明日また引いてね⸜( ´ ꒳ ` )⸝'));
</script>
</body>
</html>
